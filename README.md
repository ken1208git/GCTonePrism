# ゲームセンターTONE 統合ランチャーシステム「Prism」

## 1. プロジェクト概要 (Project Overview)
GCTonePrismは、Godot Engineで開発されている、文化祭展示用の統合ゲームランチャーです。本プロジェクトの目的は、データ駆動設計に基づき、拡張性とメンテナンス性の高いランチャーを構築することです。

## 2. アーキテクチャ (Architecture)
本ランチャーは、いくつかの主要な設計パターンに基づいて構築されています。

*   **Singleton (`Global.gd`)**:
    シーンを越えて状態を永続化させるため、Godotの`Autoload`機能を利用したシングルトン`Global.gd`を実装しています。デバッグモードの状態やグローバル設定など、プロジェクト全体で共有されるべきデータとロジックはここに配置されます。

*   **データ駆動設計 (Data-Driven Design)**:
    UIの表示内容やゲームの起動情報は、外部のJSONファイルによって定義されます。これにより、コードを直接変更することなく、ゲームの追加や表示順の変更が可能です。
    *   `launcher_config.json`: ルートに配置。ゲームが格納されているディレクトリのパスや、ゲームの表示順序 (`games_order`) など、ランチャー全体の動作を定義します。
    *   `game.json`: 各ゲームのフォルダ内に配置。ゲームのタイトル、説明文、アイコンや背景画像のパス、実行ファイルのパス、キーマッピング情報など、個別のゲームに関するメタデータを定義します。

## 3. コアシステム解説 (Core Systems)

### 3.1. データハンドリング & UI生成
- `launcher_config.json`を読み込み、`games_order`配列に従って各ゲームフォルダをスキャンします。
- 各フォルダ内の`game.json`をパースし、その情報に基づいてゲーム選択UI（アイコン、背景、説明文など）を動的に生成します。

### 3.2. 外部プロセス管理
- `OS.create_process` を使用して、`game.json`に指定された外部ゲームの実行ファイル（.exe）を非同期で起動します。
- プロセスIDを管理し、将来的なオーバーレイ機能や強制終了機能の基盤とします。

### 3.3. デバッグモジュール
- `Global.gd`で管理されるデバッグモードのフラグに基づき、`debug_monitor.tscn`（CanvasLayer）の表示/非表示を切り替えます。
- FPS、メモリ使用量、カスタムログなどを画面上にオーバーレイ表示し、開発とテストを効率化します。

### 3.4. 外部ツール連携 (AutoHotkey)
- コントローラー非対応のゲームに対し、`game.json`で定義されたキーマッピング情報に基づき、AutoHotkeyスクリプトを動的に生成・実行する機能を計画しています。

## 4. 開発の始め方 (Getting Started)

### 4.1. 前提条件
- [Godot Engine (v4.2 or later)](https://godotengine.org/)
- [Git](https://git-scm.com/)

### 4.2. インストールと実行
```bash
# 1. リポジトリをクローン
git clone https://github.com/ken1208git/GCTonePrism.git

# 2. プロジェクトフォルダに移動
cd GCTonePrism
```
3. Godot Engineを起動し、「インポート」から`project.godot`ファイルを選択します。
4. `F5`キーでメインシーンを実行します。

## 5. ゲームの追加手順 (Game Integration Guide)
新しいゲームをランチャーに追加する手順は以下の通りです。

1.  **フォルダ作成**: `launcher_config.json`で指定された`games_directory`内に、ゲーム用の新規フォルダを作成します。
2.  **ファイル配置**: 作成したフォルダ内に、ゲームの実行ファイルと関連ファイルをすべて配置します。
3.  **`game.json`作成**: 作成したフォルダ直下に、規定のフォーマットで`game.json`を作成し、ゲーム情報を記述します。
4.  **表示順の更新**: ルートの`launcher_config.json`を開き、`games_order`配列に、作成したゲームのフォルダ名を追加します。

## 6. タスク管理とロードマップ (Tasks & Roadmap)
本プロジェクトのタスクとマイルストーンは、すべてGitHub Issuesで管理されています。
実装予定の機能やバグ修正については、以下のリンクから最新の状況を確認してください。

- **[GCTonePrism - GitHub Issues](https://github.com/ken1208git/GCTonePrism/issues)**

## 7. 主要なファイルとディレクトリ構造
- `.godot/`: Godotエディタが自動生成するキャッシュとインポート設定。
- `assets/`: フォント、テーマ、共通のUIパーツなど、プロジェクト全体で使用するアートアセット。
- `scenes/`: UI画面やコンポーネントなど、`.tscn`ファイル。
- `scripts/`: UIや各ノードにアタッチする`.gd`スクリプト。
- `global.gd`: Autoloadされるシングルトン。
- `project.godot`: プロジェクトのメイン設定ファイル。
- `launcher_config.json`: ランチャーの全体設定ファイル。
